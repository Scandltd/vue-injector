/*!
 * 
 *   @scandltd/vue-injector v3.3.2
 *   (c) 2020 Scandltd
 *   @license GPL-2.0
 * 
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return n={},o.m=r=[function(e,t,r){"use strict";var n;r.r(t);var i,o,c,a="undefined"!=typeof window;function s(r,n){void 0===n&&(n={});var o=r,e=Reflect.ownKeys(n).filter(function(e){return null===r.match(new RegExp("{"+String(e)+"}"))});return e.length&&console.warn(i.ERROR_BUILD_MESSAGE+e),Object.keys(n).forEach(function(e){var t=new RegExp("{"+e+"}");o=r.replace(t,n[e])}),o}function u(e,t){if(!e)throw new Error(i.ERROR_TYPE+" "+t)}(o=i=i||{}).ERROR_TYPE="[@scandltd/vue-injector]:",o.ERROR_INJECTABLE_OPTIONS_CONFLICT="@injectable can take only one parameter either {names}",o.ERROR_BUILD_MESSAGE='function "message". Parameters in a string do not match those in array: ',o.ERROR_INIT_PLUGIN="not installed. Make sure to call `Vue.use(VueInjector)` before creating root instance.",o.ERROR_PROVIDERS_TYPE="providers are not objects",o.ERROR_USE_DECORATOR="no decorator Injectable",o.ERROR_USE_FACTORY_RETURN="useFactory invalid return",o.ERROR_USE_VALUE_RETURN="invalid useValue",o.ERROR_USE_FACTORY_TYPE="{name} invalid type useFactory: must be 'function'",o.ERROR_EMTY_INJECT_PARAMS="@inject must get a service as parameter",(c||(c={})).WARNING_000="Wrong service registration. Service name: {name}.\n@injectable can take only one parameter either useFactory or useValue, but got {options}";var f=(p.bind=function(e,t,r){return Reflect.defineProperty(e,r,{enumerable:!0,configurable:!1,get:function(){return t}})},p);function p(){}var l,R,d={TYPE:Symbol("inject:type"),VALUE:Symbol("inject:value"),NAME:Symbol("inject:name"),SERVICE:Symbol("inject:service"),TS_TYPE:"design:type"};(R=l=l||{}).useFactory="useFactory",R.useValue="useValue";var h=(y.prototype.getFactory=function(e){var t=Reflect.getMetadata(d.NAME,e),r=Reflect.getMetadata(d.VALUE,e);if(r&&"function"!=typeof r)throw u(!1,s(i.ERROR_USE_FACTORY_TYPE,{name:t}));var n=r();if(!n)throw u(!1,i.ERROR_USE_FACTORY_RETURN);return function(){return n}},y);function y(){}var _=(v.prototype.getFactory=function(e){var t=Reflect.getMetadata(d.VALUE,e);if(t)return function(){return t};throw u(!1,i.ERROR_USE_VALUE_RETURN)},v);function v(){}var E=(g.prototype.getFactory=function(e){var t=new e;return function(){return t}},g);function g(){}var O=(b.make=function(e){var t=Reflect.getMetadata(d.TYPE,e);return b.getFactoryByName(t).getFactory(e)},b.getFactoryByName=function(e){switch(e){case l.useFactory:return new h;case l.useValue:return new _;default:return new E}},b);function b(){}var j=(Object.defineProperty(m.prototype,"instance",{get:function(){return this.factory()},enumerable:!0,configurable:!0}),m.prototype.bindTo=function(e,t){return f.bind(e,this.instance,t||this.name)},Object.defineProperty(m.prototype,"name",{get:function(){return Reflect.getMetadata(d.NAME,this.service)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"isService",{get:function(){return!!Reflect.getMetadata(d.SERVICE,this.service)},enumerable:!0,configurable:!0}),m.prototype.register=function(){if("Vue"===this.service.name&&(this.factory=function(){return m.app}),!this.factory&&this.isService&&(this.factory=O.make(this.service)),this.factory)return this.factory;throw u(!1,i.ERROR_USE_DECORATOR)},m);function m(e){this.service=e,this.factory=null,this.register()}var S=(T.prototype.registerComponent=function(t){var r=this;this.provideAllServices(t),this.rootServices.length&&this.rootServices.forEach(function(e){r.provide(e,t)})},T.prototype.get=function(e){return this.provide(e)},T.prototype.provide=function(e,t,r){void 0===t&&(t=null),this.services.has(e)||(e.prototype.providers&&this.registerDependencies(e.prototype),this.services.set(e,new j(e)));var n=this.services.get(e);return t&&n.bindTo(t,r),n.instance},T.prototype.provideAllServices=function(t){var r=this;if(Object.hasOwnProperty.call(t,"providers")){var n=t.providers;if(!n||!function(e){return!Array.isArray(e)&&"object"==typeof e&&null!==e}(n))throw u(!1,i.ERROR_PROVIDERS_TYPE);Object.keys(n).forEach(function(e){n&&Object.hasOwnProperty.call(n,e)&&r.provide(n[e],t,e)})}},T.prototype.registerDependencies=function(e){this.provideAllServices(e),delete e.providers},T);function T(e,t){this.rootServices=[],j.app=e,this.app=e,this.rootServices=t,this.services=new Map}var w=(Object.defineProperty(P,"whitelist",{get:function(){return Reflect.ownKeys(l)},enumerable:!0,configurable:!0}),P.getOptionKeys=function(e){return Reflect.ownKeys(e)},P.isOtherProperty=function(e){return!P.getOptionKeys(e).every(function(e){return-1!==P.whitelist.indexOf(e)})},P.isCollisionProps=function(t){return 1<P.whitelist.filter(function(e){return Reflect.has(t,e)}).length},P.getType=function(t){return P.whitelist.find(function(e){return Reflect.has(t,e)})},P.getServiceType=function(e,t){if(P.isOtherProperty(t)&&P.warnMassage(e,t),P.isCollisionProps(t))throw P.errorMassage();return P.getType(t)?l[P.getType(t)]:null},P.errorMassage=function(){throw u(!1,s(i.ERROR_INJECTABLE_OPTIONS_CONFLICT,{names:JSON.stringify(P.whitelist)}))},P.warnMassage=function(e,t){s(c.WARNING_000,{name:e.name,options:JSON.stringify(t)})},P.make=function(e,t){return void 0===t&&(t={}),this.defineMetadata(e,t),this.createDecorators(e),e},P.defineMetadata=function(e,t){var r=P.getServiceType(e,t);r&&(Reflect.defineMetadata(d.TYPE,r,e),Reflect.defineMetadata(d.VALUE,t[r],e)),Reflect.defineMetadata(d.NAME,e.name,e),Reflect.defineMetadata(d.SERVICE,!0,e)},P.createDecorators=function(t){t.__decorators__&&(t.__decorators__.forEach(function(e){return e(t.prototype)}),delete t.__decorators__)},P);function P(){}function M(t){return"function"==typeof t?w.make(t):function(e){return w.make(e,t)}}function A(r){return function(o){return function(e,t){var r="function"==typeof e?e:e.constructor,n={enumerable:!0,configurable:!0,initializer:function(){return this.__proto__[t]}};return Reflect.defineProperty(e,t,n),(r.__decorators__||(r.__decorators__=[])).push(function(e){return o(e,t)}),n}}(function(e,t){(e.providers||(e.providers={}))[t]=r})}function N(e,t){if("function"==typeof e)return A(e);var r=Reflect.getMetadata(d.TS_TYPE,e,t);if(void 0===r)throw u(!1,i.ERROR_EMTY_INJECT_PARAMS);A(r)(e,t)}r.d(t,"VueInjector",function(){return I}),r.d(t,"Injectable",function(){return M}),r.d(t,"Inject",function(){return N});var I=(Object.defineProperty(C,"app",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"install",{get:function(){return C.install},enumerable:!0,configurable:!0}),C.prototype.init=function(e){this.apps.push(e),this.app||(this.app=e,this.injector=new S(this.app,this.rootServices))},C.prototype.initComponent=function(e){return this.injector&&this.injector.registerComponent(e)},C.prototype.get=function(e){return this.injector&&this.injector.get(e)},C);function C(e){void 0===e&&(e={}),this.rootServices=[],this.app=null,this.injector=null,this.apps=[],this.rootServices=e.root||[],e.store&&(e.store.$injector=this)}I.install=function e(t){if(!e.installed||n!==t){e.installed=!0;var r=function(e){return void 0!==e};(n=t).mixin({beforeCreate:function(){r(this.$options.providers)&&(this.providers=this.$options.providers),r(this.$options.injector)?((this._injectorRoot=this)._injector=this.$options.injector,this._injector.init(this)):(this._injectorRoot=this.$parent&&this.$parent._injectorRoot||this,this._injectorRoot._injector&&this._injectorRoot._injector.initComponent(this))}}),Object.defineProperty(t.prototype,"$injector",{get:function(){return this._injectorRoot&&this._injectorRoot._injector}}),t.config.optionMergeStrategies._injectorRoot=function(e,t){return void 0===t?e:t}}},I.version="__VERSION__",a&&window.Vue&&window.Vue.use(I)}],o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0);function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var r,n});