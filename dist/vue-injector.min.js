/*!
 * 
 *   @scandltd/vue-injector v3.2.4
 *   (c) 2019 Scandltd
 *   @license GPL-2.0
 * 
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,function(){return n={},o.m=r=[function(t,e,r){"use strict";var n;r.r(e);var i,o,c,s="undefined"!=typeof window;function a(r,n){void 0===n&&(n={});var o=r,t=Reflect.ownKeys(n).filter(function(t){return null===r.match(new RegExp("{"+String(t)+"}"))});return t.length&&console.warn(i.ERROR_002+t),Object.keys(n).forEach(function(t){var e=new RegExp("{"+t+"}");o=r.replace(e,n[t])}),o}function u(t,e){if(!t)throw new Error(i.ERROR_000+" "+e)}function f(t){return!Array.isArray(t)&&"object"==typeof t&&null!==t}(o=i=i||{}).ERROR_000="[@scandltd/vue-injector]:",o.ERROR_001="@injectable can take only one parameter either {names}",o.ERROR_002='function "message". Parameters in a string do not match those in array: ',o.ERROR_003="not installed. Make sure to call `Vue.use(VueInjector)` before creating root instance.",o.ERROR_004="providers are not objects",o.ERROR_005="no decorator Injectable",o.ERROR_006="useFactory invalid return",o.ERROR_007="invalid useValue",o.ERROR_008="{name} invalid type useFactory: must be 'function'",o.ERROR_009="{method} is not a function",o.ERROR_010="@inject must get a service as parameter",(c||(c={})).WARNING_000="Wrong service registration. Service name: {name}.\n@injectable can take only one parameter either useFactory or useValue, but got {options}";var p,l,h,y,d=(v.bind=function(t,e,r){return Reflect.defineProperty(t,r,{enumerable:!0,configurable:!1,get:function(){return e}})},v);function v(){}(l=p=p||{}).TYPE="inject:type",l.VALUE="inject:value",l.NAME="inject:name",l.SERVICE="inject:service",l.TS_TYPE="design:type",(y=h=h||{}).useFactory="useFactory",y.useValue="useValue";var R=(g.prototype.getFactory=function(t){var e=Reflect.getMetadata(p.NAME,t),r=Reflect.getMetadata(p.VALUE,t);if(r&&"function"!=typeof r)throw u(!1,a(i.ERROR_008,{name:e}));return function(){var t=r();if(!t)throw u(!1,i.ERROR_006);return t}},g);function g(){}var b=(_.prototype.getFactory=function(t){var e=Reflect.getMetadata(p.VALUE,t);if(e)return function(){return e};throw u(!1,i.ERROR_007)},_);function _(){}var j=(m.prototype.getFactory=function(t){var e=new t;return function(){return e}},m);function m(){}var O=(E.make=function(t){var e=Reflect.getMetadata(p.TYPE,t);return E.getFactoryByName(e).getFactory(t)},E.getFactoryByName=function(t){switch(t){case h.useFactory:return new R;case h.useValue:return new b;default:return new j}},E);function E(){}var w=(P.prototype.instance=function(){return this.$factory()},P.prototype.bindTo=function(t,e){return t?d.bind(t,this.$factory(),e||this.name):this.factory},Object.defineProperty(P.prototype,"factory",{get:function(){return this.$factory},set:function(t){this.$factory=t},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"name",{get:function(){return Reflect.getMetadata(p.NAME,this.service)},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"isService",{get:function(){return Reflect.getMetadata(p.SERVICE,this.service)},enumerable:!0,configurable:!0}),P.prototype.register=function(){if("Vue"===this.service.name&&(this.factory=function(){return P.app}),!this.factory&&this.isService&&(this.factory=O.make(this.service)),this.factory)return this.factory;throw u(!1,i.ERROR_005)},P);function P(t){this.service=t,this.$factory=null,this.register()}var M=(S.prototype.registerComponent=function(e){var r=this;if(Object.hasOwnProperty.call(e,"_providers")){var n=e._providers;if(!n||!f(n))throw u(!1,i.ERROR_004);Object.keys(n).forEach(function(t){n&&Object.hasOwnProperty.call(n,t)&&r.provide(e._providers[t],e,t)})}this.rootServices.length&&this.rootServices.forEach(function(t){r.provide(t,e)})},S.prototype.get=function(t){return this.provide(t)},S.prototype.provide=function(t,e,r){if(void 0===e&&(e=null),!this.services.has(t)){t.prototype.providers&&this.registerDependencies(t.prototype);var n=new w(t);this.services.set(t,n)}var o=this.services.get(t);return o.bindTo(e,r),o.instance()},S.prototype.registerDependencies=function(e){var r=this;if(!f(e.providers))throw u(!1,i.ERROR_004);Object.keys(e.providers).forEach(function(t){r.provide(e.providers[t],e,t)}),delete e.providers},S);function S(t,e){this.rootServices=[],w.app=t,this.app=t,this.rootServices=e,this.services=new Map}var V=(Object.defineProperty(T,"whitelist",{get:function(){return Reflect.ownKeys(h)},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"decorators",{get:function(){return this.target.__decorators__},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"optionKeys",{get:function(){return Reflect.ownKeys(this.options)},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"isOtherProperty",{get:function(){return!this.optionKeys.every(function(t){return-1!==T.whitelist.indexOf(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"isCollisionProps",{get:function(){var e=this;return 1<T.whitelist.filter(function(t){return Reflect.has(e.options,t)}).length},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"type",{get:function(){var e=this;return T.whitelist.find(function(t){return Reflect.has(e.options,t)})},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"serviceType",{get:function(){if(this.isOtherProperty&&this.warnMassage(),this.isCollisionProps)throw T.errorMassage();return this.type?h[this.type]:null},enumerable:!0,configurable:!0}),T.errorMassage=function(){throw u(!1,a(i.ERROR_001,{names:JSON.stringify(T.whitelist)}))},T.prototype.make=function(t,e){return void 0===e&&(e={}),this.target=t,this.options=e,this.defineMetadata(),this.createDecorators(),this.target},T.prototype.warnMassage=function(){a(c.WARNING_000,{name:this.target.name,options:JSON.stringify(this.options)})},T.prototype.defineMetadata=function(){this.serviceType&&(Reflect.defineMetadata(p.TYPE,this.serviceType,this.target),Reflect.defineMetadata(p.VALUE,this.options[this.serviceType],this.target)),Reflect.defineMetadata(p.NAME,this.target.name,this.target),Reflect.defineMetadata(p.SERVICE,!0,this.target)},T.prototype.createDecorators=function(){var e=this;this.decorators&&(this.decorators.forEach(function(t){return t(e.target.prototype)}),delete this.target.__decorators__)},T);function T(){this.target=null,this.options={}}function x(e){var r=new V;return"function"==typeof e?r.make(e):function(t){return r.make(t,e)}}function N(r){return function(o){return function(t,e){var r="function"==typeof t?t:t.constructor,n={enumerable:!0,configurable:!0,initializer:function(){return this.__proto__[e]}};return Reflect.defineProperty(t,e,n),(r.__decorators__||(r.__decorators__=[])).push(function(t){return o(t,e)}),n}}(function(t,e){(t.providers||(t.providers={}))[e]=r})}function $(t,e){if("function"==typeof t)return N(t);var r=Reflect.getMetadata(p.TS_TYPE,t,e);if(void 0===r)throw u(!1,i.ERROR_010);N(r)(t,e)}r.d(e,"VueInjector",function(){return A}),r.d(e,"Injectable",function(){return x}),r.d(e,"Inject",function(){return $});var A=(Object.defineProperty(F,"app",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"install",{get:function(){return F.install},enumerable:!0,configurable:!0}),F.prototype.init=function(t){this.apps.push(t),this.app||(this.app=t,this.injector=new M(this.app,this.rootServices))},F.prototype.initComponent=function(t){return this.injector&&this.injector.registerComponent(t)},F.prototype.get=function(t){return this.injector&&this.injector.get(t)},F);function F(t){void 0===t&&(t={}),this.rootServices=[],this.app=null,this.injector=null,this.apps=[],this.rootServices=t.root||[],t.store&&(t.store.$injector=this)}A.install=function t(e){if(!t.installed||n!==e){t.installed=!0;var r=function(t){return void 0!==t};(n=e).mixin({beforeCreate:function(){r(this.$options.providers)&&(this._providers=this.$options.providers),r(this.$options.injector)?((this._injectorRoot=this)._injector=this.$options.injector,this._injector.init(this)):(this._injectorRoot=this.$parent&&this.$parent._injectorRoot||this,this._injectorRoot._injector&&this._injectorRoot._injector.initComponent(this))}}),Object.defineProperty(e.prototype,"$injector",{get:function(){return this._injectorRoot&&this._injectorRoot._injector}}),e.config.optionMergeStrategies._injectorRoot=function(t,e){return void 0===e?t:e}}},A.version="__VERSION__",s&&window.Vue&&window.Vue.use(A)}],o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0);function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var r,n});