/*!
 * 
 *   @scandltd/vue-injector v3.3.5
 *   (c) 2020 Scandltd
 *   @license GPL-2.0
 * 
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("vue"));else if("function"==typeof define&&define.amd)define(["vue"],t);else{var r="object"==typeof exports?t(require("vue")):t(e.Vue);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(r){return o={},i.m=n=[function(e,t){e.exports=r},function(e,t,r){"use strict";r.r(t);var o,n,i,c=r(0),a=r.n(c);function s(r,n){void 0===n&&(n={});var i=r,e=Reflect.ownKeys(n).filter(function(e){return null===r.match(new RegExp("{"+String(e)+"}"))});return e.length&&console.warn(o.ERROR_BUILD_MESSAGE+e),Object.keys(n).forEach(function(e){var t=new RegExp("{"+e+"}");i=r.replace(t,n[e])}),i}function u(e,t){if(!e)throw new Error(o.ERROR_TYPE+" "+t)}(n=o=o||{}).ERROR_TYPE="[@scandltd/vue-injector]:",n.ERROR_INJECTABLE_OPTIONS_CONFLICT="@injectable can take only one parameter either {names}",n.ERROR_BUILD_MESSAGE='function "message". Parameters in a string do not match those in array: ',n.ERROR_INIT_PLUGIN="not installed. Make sure to call `Vue.use(VueInjector)` before creating root instance.",n.ERROR_PROVIDERS_TYPE="providers are not objects",n.ERROR_USE_DECORATOR="no decorator Injectable",n.ERROR_USE_FACTORY_RETURN="useFactory invalid return",n.ERROR_USE_VALUE_RETURN="invalid useValue",n.ERROR_USE_FACTORY_TYPE="{name} invalid type useFactory: must be 'function'",n.ERROR_EMTY_INJECT_PARAMS="@inject must get a service as parameter",(i||(i={})).WARNING_000="Wrong service registration. Service name: {name}.\n@injectable can take only one parameter either useFactory or useValue, but got {options}";var f="undefined"!=typeof window;var p=(l.bind=function(e,t,r){return Reflect.defineProperty(e,r,{enumerable:!0,configurable:!1,get:function(){return t}})},l);function l(){}var d,y,R={TYPE:Symbol("inject:type"),VALUE:Symbol("inject:value"),NAME:Symbol("inject:name"),SERVICE:Symbol("inject:service"),TS_TYPE:"design:type"};(y=d=d||{}).useFactory="useFactory",y.useValue="useValue";var h=(v.prototype.getFactory=function(e){var t=Reflect.getMetadata(R.NAME,e),r=Reflect.getMetadata(R.VALUE,e);if(r&&"function"!=typeof r)throw u(!1,s(o.ERROR_USE_FACTORY_TYPE,{name:t}));var n=r();if(!n)throw u(!1,o.ERROR_USE_FACTORY_RETURN);return function(){return n}},v);function v(){}var _=(E.prototype.getFactory=function(e){var t=Reflect.getMetadata(R.VALUE,e);if(t)return function(){return t};throw u(!1,o.ERROR_USE_VALUE_RETURN)},E);function E(){}var g=(b.prototype.getFactory=function(e){var t=new e;return function(){return t}},b);function b(){}var O=(j.make=function(e){var t=Reflect.getMetadata(R.TYPE,e);return j.getFactoryByName(t).getFactory(e)},j.getFactoryByName=function(e){switch(e){case d.useFactory:return new h;case d.useValue:return new _;default:return new g}},j);function j(){}var m=(Object.defineProperty(S.prototype,"instance",{get:function(){return this.factory()},enumerable:!0,configurable:!0}),S.prototype.bindTo=function(e,t){return p.bind(e,this.instance,t||this.name)},Object.defineProperty(S.prototype,"name",{get:function(){return Reflect.getMetadata(R.NAME,this.service)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"isService",{get:function(){return!!Reflect.getMetadata(R.SERVICE,this.service)},enumerable:!0,configurable:!0}),S.prototype.register=function(){if(this.service===a.a&&(this.factory=function(){return S.app}),!this.factory&&this.isService&&(this.factory=O.make(this.service)),this.factory)return this.factory;throw u(!1,o.ERROR_USE_DECORATOR)},S);function S(e){this.service=e,this.factory=null,this.register()}var w=(T.prototype.registerComponent=function(t){var r=this;this.provideAllServices(t),this.rootServices.length&&this.rootServices.forEach(function(e){r.provide(e,t)})},T.prototype.get=function(e){return this.provide(e)},T.prototype.provide=function(e,t,r){void 0===t&&(t=null),this.services.has(e)||(e.prototype.providers&&this.registerDependencies(e.prototype),this.services.set(e,new m(e)));var n=this.services.get(e);return t&&n.bindTo(t,r),n.instance},T.prototype.provideAllServices=function(t){var e,r=this;if(Object.hasOwnProperty.call(t,"providers")){var n=t.providers;if(!n||(e=n,Array.isArray(e)||"object"!=typeof e||null===e))throw u(!1,o.ERROR_PROVIDERS_TYPE);Object.keys(n).forEach(function(e){n&&Object.hasOwnProperty.call(n,e)&&r.provide(n[e],t,e)})}},T.prototype.registerDependencies=function(e){this.provideAllServices(e),delete e.providers},T);function T(e,t){this.rootServices=[],m.app=e,this.app=e,this.rootServices=t,this.services=new Map}var P=(Object.defineProperty(M,"whitelist",{get:function(){return Reflect.ownKeys(d)},enumerable:!0,configurable:!0}),M.getOptionKeys=function(e){return Reflect.ownKeys(e)},M.isOtherProperty=function(e){return!M.getOptionKeys(e).every(function(e){return-1!==M.whitelist.indexOf(e)})},M.isCollisionProps=function(t){return 1<M.whitelist.filter(function(e){return Reflect.has(t,e)}).length},M.getType=function(t){return M.whitelist.find(function(e){return Reflect.has(t,e)})},M.getServiceType=function(e,t){if(M.isOtherProperty(t)&&M.warnMassage(e,t),M.isCollisionProps(t))throw M.errorMassage();return M.getType(t)?d[M.getType(t)]:null},M.errorMassage=function(){throw u(!1,s(o.ERROR_INJECTABLE_OPTIONS_CONFLICT,{names:JSON.stringify(M.whitelist)}))},M.warnMassage=function(e,t){s(i.WARNING_000,{name:e.name,options:JSON.stringify(t)})},M.make=function(e,t){return void 0===t&&(t={}),this.defineMetadata(e,t),this.createDecorators(e),e},M.defineMetadata=function(e,t){var r=M.getServiceType(e,t);r&&(Reflect.defineMetadata(R.TYPE,r,e),Reflect.defineMetadata(R.VALUE,t[r],e)),Reflect.defineMetadata(R.NAME,e.name,e),Reflect.defineMetadata(R.SERVICE,!0,e)},M.createDecorators=function(t){t.__decorators__&&(t.__decorators__.forEach(function(e){return e(t.prototype)}),delete t.__decorators__)},M);function M(){}function A(t){return"function"==typeof t?P.make(t):function(e){return P.make(e,t)}}function I(r){return i=function(e,t){(e.providers||(e.providers={}))[t]=r},function(e,t){var r="function"==typeof e?e:e.constructor,n={enumerable:!0,configurable:!0,initializer:function(){return this.__proto__[t]}};return Reflect.defineProperty(e,t,n),(r.__decorators__||(r.__decorators__=[])).push(function(e){return i(e,t)}),n};var i}function N(e,t){if("function"==typeof e)return I(e);var r=Reflect.getMetadata(R.TS_TYPE,e,t);if(void 0===r)throw u(!1,o.ERROR_EMTY_INJECT_PARAMS);I(r)(e,t)}r.d(t,"VueInjector",function(){return C}),r.d(t,"Injectable",function(){return A}),r.d(t,"Inject",function(){return N});var C=(Object.defineProperty(V,"app",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"install",{get:function(){return V.install},enumerable:!0,configurable:!0}),V.prototype.init=function(e){this.apps.push(e),this.app||(this.app=e,this.injector=new w(this.app,this.rootServices))},V.prototype.initComponent=function(e){return this.injector&&this.injector.registerComponent(e)},V.prototype.get=function(e){return this.injector&&this.injector.get(e)},V);function V(e){void 0===e&&(e={}),this.rootServices=[],this.app=null,this.injector=null,this.apps=[],this.rootServices=e.root||[],e.store&&(e.store.$injector=this)}C.install=function e(t){if(!e.installed){if(e.installed=!0,a.a!==t)throw u(!1,"Multiple instances of Vue detected");var r=function(e){return void 0!==e};t.$injectorInstalled||(t.$injectorInstalled=!0,t.mixin({beforeCreate:function(){r(this.$options.providers)&&(this.providers=this.$options.providers),r(this.$options.injector)?(Object.defineProperty(this,"$injector",{configurable:!1,writable:!1,value:t.observable(this.$options.injector)}),this.$injector.init(this)):(Object.defineProperty(this,"$injector",{configurable:!1,writable:!1,value:this.$parent&&this.$parent.$injector||this}),this.$injector.initComponent(this))}}))}},C.version="__VERSION__",f&&window.Vue&&window.Vue.use(C)}],i.c=o,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1);function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,o});